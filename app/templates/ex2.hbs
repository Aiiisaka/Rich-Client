{{page-title "Ex2"}}
<div class="container">
  <form id='services' class="ng-pristine ng-valid ng-scope">
    <h1>Services</h1><br>

    <div class='alert alert-info'>
      <span>Choisissez les services à inclure dans la facturation :</span><br>
      <b> {{plural @model.countActive 'Aucun service a été sélectionné !' 'Service Sélectionné ...' 'Services Sélectionnés ...'}}</b>
    </div>

    <ul class="list-group">
      {{#each @model.services as |service|}}
        <li class="list-group-item {{if service.active 'active' ''}}"
          {{action "toggleActive" service}}>
          <div class="row justify-content-between"><div class="col-lg-9">{{service.name}}</div> <div class="text-right">{{format-currency service.price '€'}}</div></div>
        </li>
      {{/each}}
    </ul>

    <div id='total'>
      <h3 class="row justify-content-between">
        <div class="col-lg-6">Total :</div><div class="text-right">{{format-currency @model.sumActive '€'}}</div>
      </h3>
    </div>

    <div class="input-group">
      <span class="input-group-addon">
        <input type="checkbox" {{ action "toggleTotalVisible" this on="change"}} ng-model="choixPromo" ng-click="applyCode()" class="ng-valid ng-dirty ng-valid-parse ng-touched">
      </span>
      <input type="text" class="form-control ng-pristine ng-untouched ng-valid" ng-model="codePromo" placeholder="Code promo ..." ng-keyup="applyCode()">
      <br>
    </div>

    <div id="totalAvecRemise" class="ng-hide" ng-show="choixPromo&&codePromo">
      <h3 class="row justify-content-between">
        <div>Remise :</div><div class="text-right"><span ng-if="!IsNumeric(remise)" class="ng-binding ng-scope">Code promo invalide</span></div>
      </h3>
      <h3 class="row justify-content-between">
        <div>Total avec remise :</div><div class="text-right"><span class="ng-binding"></span></div>
      </h3>
    </div>
  </form>
</div>
{{outlet}}